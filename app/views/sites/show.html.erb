<% content_for(:title, "Site | ReVamp") %>

<div class="container">
  <div class="sites-head">
    <h2><%= @site.site_name %></h2>
  </div>
  <div class="sites-body">
    <%= link_to @site.description, @site.description, target: '_blank' %>

    <% @site.images.each_with_index do |image, index| %>
      <%= image_tag image.url.to_s, {class: "site-screenshots"} %>
    <% if user_signed_in? %>
      <%= link_to "Delete", site_image_path(@site, index), :method => :delete, data: { confirm: "Are you sure you want to delete this image?" } %>
        <% end %>
    <% end %>

  <div class="add-images">
    <% if user_signed_in? %>
      <h4>Add More Images</h4>
      <%= form_for @site, url: site_images_path(@site), method: :post do |f| %>
        <%= f.file_field :images, multiple: true %>
        <%= f.submit %>
      <% end %>
    <% end %>
    </div>
    <hr>

    <p>Tags: <%= raw(@site.tag_list.map { |t| link_to t, tag_path(t) }.join(', ')) %></p>

    <hr>
        <% if user_signed_in? %>

    <p><%= link_to "Edit Site", edit_site_path %> | <%= link_to "Delete Site", site_path(@site), :data => { :confirm => "Are you sure you want to delete this Site?", :method => "delete" } %></p>
        <% end %>

    </div> <br> <br>
    <div id="disqus_thread"></div>
      <script>
        /**
        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        /*
        var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://revamp.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
